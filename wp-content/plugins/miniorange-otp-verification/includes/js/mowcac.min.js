jQuery(document).ready(function(){$mo=jQuery,$mo("#enter_otp_field").hide(),focusChecks()});let button='<button type="button" onclick="sendOTP()" class="button miniorange_otp_token_submit" id="miniorange_otp_token_submit">'+mowcac.buttontext+"</button>";var img="<img src='"+mowcac.imgURL+"'>",html=button+"<div id='mo_message' hidden='' style='background-color: #f7f6f7;padding: 1em 2em 1em 3.5em;'>"+img+"</div>";function focusChecks(){"phone"==mowcac.otpType?$mo("form.edit-account #billing_phone").on("change paste keyup",function(){$mo(this).val()===mowcac.fieldValue?removeOTPField():(insertOTPField(),$mo("#enter_otp_field").insertAfter("#mo_message").show())}):$mo("form.edit-account #account_email").on("change paste keyup",function(){$mo(this).val()===mowcac.fieldValue?removeOTPField():(insertOTPField(),$mo("#enter_otp_field").insertAfter("#mo_message").show())})}function sendOTP(){if("phone"==mowcac.otpType)var e=$mo("#billing_phone").val();else e=$mo("#account_email").val();$mo("#mo_message").empty(),$mo("#mo_message").append(img),$mo("#mo_message").show(),$mo.ajax({url:mowcac.siteURL,type:"POST",data:{action:mowcac.generateURL,user_input:e,security:mowcac.nonce},crossDomain:!0,dataType:"json",success:function(e){"success"==e.result?($mo("#mo_message").empty(),$mo("#mo_message").append(e.message),$mo("#mo_message").css("border-top","3px solid green")):($mo("#mo_message").empty(),$mo("#mo_message").append(e.message),$mo("#mo_message").css("border-top","3px solid red"))},error:function(e){$mo("#mo_message").empty(),$mo("#mo_message").append(e.message),$mo("#mo_message").css("border-top","3px solid red")}})}function removeOTPField(){$mo("#miniorange_otp_token_submit").remove(),$mo("#enter_otp_field").hide(),$mo("#mo_message").remove()}function insertOTPField(){0==$mo("#miniorange_otp_token_submit").length&&("phone"==mowcac.otpType?$mo(html).insertAfter("#billing_phone_field"):$mo(html).insertAfter("#account_email"))}